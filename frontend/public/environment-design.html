<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>環境設計書</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; line-height: 1.6; margin: 0; padding: 20px; background: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1, h2, h3, h4 { color: #333; }
        h1 { border-bottom: 2px solid #e1e4e8; padding-bottom: 10px; }
        .status-completed { color: #28a745; }
        .status-progress { color: #ffc107; }
        .status-pending { color: #6c757d; }
        code { background: #f6f8fa; padding: 2px 4px; border-radius: 3px; }
        .update-time { color: #666; font-style: italic; margin-top: 20px; padding-top: 20px; border-top: 1px solid #e1e4e8; }
    </style>
</head>
<body>
    <div class="container">
        <h1>環境設計書</h1></p><p><strong>最終更新日:</strong> 2025-07-04</p><p><h2>🏗️ システム概要</h2></p><p><h3>プロジェクト情報</h3>
<li><strong>プロジェクト名:</strong> ROIC分析アプリケーション</li>
<li><strong>バージョン:</strong> 1.0.0</li>
<li><strong>開発フェーズ:</strong> MVP基盤構築（完了）</li>
<li><strong>アーキテクチャ:</strong> フルスタック Web アプリケーション</li></p><p><h2>💻 開発環境</h2></p><p><h3>ローカル開発環境</h3>
<li><strong>Node.js:</strong> v24.3.0</li>
<li><strong>npm:</strong> 11.4.2</li>
<li><strong>Git:</strong> 2.39.5 (Apple Git-154)</li>
<li><strong>OS:</strong> macOS</li></p><p><h3>Git設定</h3>
<li><strong>認証方式:</strong> HTTPS</li>
<li><strong>リモートリポジトリ:</strong> https://github.com/horiken1977/roic.git</li>
<li><strong>パフォーマンス最適化:</strong></li>
<p>  - <code>core.preloadindex=true</code>
<p>  - <code>core.fscache=true</code>
<p>  - <code>status.submoduleSummary=false</code>
<p>  - <code><strong>/node_modules/</code> .gitignore追加</p><p><h2>🏗️ アプリケーション構成</h2></p><p><h3>フロントエンド (Next.js)</h3>
<li></strong>Framework:<strong> Next.js 15.3.4</li>
<li></strong>Runtime:<strong> React ^19.0.0</li>
<li></strong>Language:<strong> TypeScript ^5</li>
<li></strong>Styling:<strong> Tailwind CSS ^4</li>
<li></strong>State Management:<strong> Zustand ^5.0.6</li>
<li></strong>HTTP Client:<strong> Axios ^1.10.0</li></p><p><h3>バックエンド (Node.js/Express)</h3>
<li></strong>Framework:<strong> Express.js ^4.18.2</li>
<li></strong>Database:<strong> PostgreSQL (AWS RDS) ^8.11.3</li>
<li></strong>Cloud:<strong> AWS SDK ^2.1498.0</li>
<li></strong>Logger:<strong> Winston ^3.11.0</li>
<li></strong>Security:<strong> Helmet, CORS, Rate Limiting</li></p><p><h2>☁️ インフラストラクチャ</h2></p><p><h3>デプロイメント環境</h3>
<li></strong>フロントエンド:<strong> GitHub Pages (Static Export)</li>
<li></strong>バックエンド:<strong> AWS Lambda + API Gateway (予定)</li>
<li></strong>データベース:<strong> AWS RDS (PostgreSQL)</li>
<li></strong>ストレージ:<strong> AWS S3</li>
<li></strong>CDN:<strong> CloudFront</li></p><p><h3>CI/CD パイプライン</h3>
<li></strong>自動テスト:<strong> Jest, Playwright</li>
<li></strong>静的解析:<strong> ESLint, TypeScript</li>
<li></strong>ビルド & デプロイ:<strong> GitHub Actions</li>
<li></strong>セキュリティスキャン:<strong> 実装済み</li></p><p><h2>🛡️ セキュリティ設定</h2></p><p><h3>Git セキュリティ</h3>
<li></strong>.gitignore設定:<strong> 環境変数、認証キー、AWSクレデンシャル除外</li>
<li></strong>機密ファイル除外:*<em> .env</em>, <em>.pem, </em>.key, secrets/</li></p><p><h3>アプリケーションセキュリティ</h3>
<li><strong>HTTPS通信:</strong> 本番環境必須</li>
<li><strong>JWT認証:</strong> バックエンドAPI</li>
<li><strong>入力検証:</strong> Joi + express-validator</li>
<li><strong>レート制限:</strong> express-rate-limit</li></p><p><h2>🔄 自動化機能</h2></p><p><h3>ファイル監視・自動更新</h3>
<li><strong>監視ファイル:</strong></li>
<p>  - Frontend: <code>frontend/src/*<em>/</em>.{tsx,ts,js}</code>
<p>  - Backend: <code>backend/*<em>/</em>.{js,ts,py}</code>
<p>  - Docs: <code>docs/*<em>/</em>.md</code>
<p>  - Tests: <code>tests/*<em>/</em>.{js,ts,spec.js,test.js}</code>
<p>  - Config: <code>config/project-config.json</code></p><p><h3>自動更新対象</h3>
<li>機能設計書 (<code>docs/functional-spec.md</code>)</li>
<li>テスト仕様書 (<code>docs/test-spec.md</code>)</li>
<li>環境設計書 (<code>docs/environment-design.md</code>)</li>
<li>プロジェクト進捗 (<code>project-progress.md</code>)</li></p><p><h2>📊 パフォーマンス最適化</h2></p><p><h3>Git最適化 (最新実施: 2025-07-04)</h3>
<li><code><strong>/node_modules/</code> .gitignore追加</li>
<li><code>core.preloadindex=true</code> (ファイルシステム最適化)</li>
<li><code>core.fscache=true</code> (キャッシュ有効化)</li>
<li><code>status.submoduleSummary=false</code> (サブモジュール無効化)</li></p><p><h3>Next.js最適化</h3>
<li></strong>Turbopack:<strong> 開発サーバー高速化</li>
<li></strong>Static Export:<strong> 本番環境最適化</li>
<li></strong>Image Optimization:<strong> 自動画像最適化</li></p><p><h2>🧪 テスト環境</h2></p><p><h3>テスト設定</h3>
<li></strong>Unit Tests:<strong> Jest ^30.0.3</li>
<li></strong>Component Tests:<strong> Testing Library ^16.3.0</li>
<li></strong>E2E Tests:<strong> Playwright ^1.53.2</li>
<li></strong>Coverage Threshold:<strong> 85%</li></p><p><h3>テスト実行状況</h3>
<li></strong>ユニットテスト:<strong> 9件 (カバレッジ: 95%)</li>
<li></strong>E2Eテスト:<strong> 0件 (カバレッジ: 70%)</li>
<li></strong>統合テスト:<strong> 0件 (カバレッジ: 75%)</li></p><p><h2>🔧 開発ワークフロー</h2></p><p><h3>ローカル開発</h3>
<p>``<code>bash</p>
<h1>フロントエンド開発サーバー起動</h1>
<p>cd frontend && npm run dev</p><p><h1>バックエンド開発サーバー起動  </h1>
<p>cd backend && npm run dev</p><p><h1>テスト実行</h1>
<p>npm test</p><p><h1>ビルド & デプロイ</h1>
<p>npm run deploy</p>
<p></code>`<code></p><p>---</p><p></strong>注意:<strong> この環境設計書は自動更新されます。環境設定変更時は </code>/config/project-config.json` および関連スクリプトが自動的に本ドキュメントを更新します。</p><p></strong>更新トリガー:*<em>
<li>パッケージ依存関係の変更</li>
<li>インフラ設定の変更  </li>
<li>セキュリティ設定の変更</li>
<li>パフォーマンス最適化の実施</li></p><p></em>最終更新: 2025/7/5 0:10:19<em>
<p></em>この文書は環境変更に応じて自動更新されます*</p>
        <div class="update-time">
            最終自動更新: 2025/7/5 0:10:19<br>
            🤖 この文書は自動的に更新されます
        </div>
    </div>
    <script>
        // Auto-refresh every 30 seconds
        setTimeout(() => window.location.reload(), 30000);
    </script>
</body>
</html>