# ðŸ”‘ AWSç§˜å¯†éµãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³æ‰‹é †

## æ¦‚è¦
GitGuardianã‚¢ãƒ©ãƒ¼ãƒˆã«å¯¾å¿œã™ã‚‹ãŸã‚ã€AWSç§˜å¯†éµã‚’æ–°ã—ã„ã‚‚ã®ã«ç½®ãæ›ãˆã‚‹æ‰‹é †ã§ã™ã€‚

## ðŸš¨ ç·Šæ€¥å¯¾å¿œå®Œäº†çŠ¶æ³
- âœ… **ãƒ•ã‚¡ã‚¤ãƒ«åå‚ç…§å‰Šé™¤**: å…¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‹ã‚‰`AWS01.pem`ã‚’`[PRIVATE_KEY]`ã«ç½®æ›æ¸ˆã¿
- âœ… **äºˆé˜²ç­–å¼·åŒ–**: .gitignoreæ›´æ–°æ¸ˆã¿
- âš ï¸ **AWSéµãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³**: ä»¥ä¸‹ã®æ‰‹é †ã§å®Ÿæ–½ãŒå¿…è¦

## ðŸ”§ AWSéµãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³æ‰‹é †

### Step 1: æ–°ã—ã„ã‚­ãƒ¼ãƒšã‚¢ã®ä½œæˆ

1. **AWSã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ãƒ­ã‚°ã‚¤ãƒ³**
   ```
   https://console.aws.amazon.com/
   ```

2. **EC2ã‚µãƒ¼ãƒ“ã‚¹ã«ç§»å‹•**
   - ã‚µãƒ¼ãƒ“ã‚¹ â†’ EC2 â†’ ã‚­ãƒ¼ãƒšã‚¢

3. **æ–°ã—ã„ã‚­ãƒ¼ãƒšã‚¢ä½œæˆ**
   ```
   åå‰: AWS02-roic-prod
   ã‚¿ã‚¤ãƒ—: RSA
   å½¢å¼: .pem
   ```

4. **ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**
   - `AWS02-roic-prod.pem`ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã«ä¿å­˜
   - æ¨©é™è¨­å®š: `chmod 400 AWS02-roic-prod.pem`

### Step 2: EC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®æ›´æ–°

#### ç¾åœ¨ã®ã‚µãƒ¼ãƒãƒ¼æƒ…å ±
- **IP**: 54.199.201.201
- **OS**: Ubuntu 24.04.2 LTS
- **æŽ¥ç¶šæ–¹æ³•**: ç¾åœ¨ã¯`ssh -i AWS01.pem ubuntu@54.199.201.201`

#### æ–°ã—ã„éµã§ã®æŽ¥ç¶šè¨­å®š

1. **æ—¢å­˜ã‚µãƒ¼ãƒãƒ¼ã«æŽ¥ç¶š**ï¼ˆç¾åœ¨ã®éµä½¿ç”¨ï¼‰
   ```bash
   ssh -i AWS01.pem ubuntu@54.199.201.201
   ```

2. **æ–°ã—ã„å…¬é–‹éµã‚’è¿½åŠ **
   ```bash
   # æ–°ã—ã„å…¬é–‹éµã‚’authorized_keysã«è¿½åŠ 
   cat >> ~/.ssh/authorized_keys << 'EOF'
   # ã“ã“ã«æ–°ã—ã„å…¬é–‹éµï¼ˆAWS02-roic-prod.pubï¼‰ã®å†…å®¹ã‚’ãƒšãƒ¼ã‚¹ãƒˆ
   EOF
   ```

3. **æŽ¥ç¶šãƒ†ã‚¹ãƒˆ**
   ```bash
   # æ–°ã—ã„éµã§ã®ãƒ†ã‚¹ãƒˆæŽ¥ç¶šï¼ˆåˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§å®Ÿè¡Œï¼‰
   ssh -i AWS02-roic-prod.pem ubuntu@54.199.201.201
   ```

4. **å¤ã„éµã®ç„¡åŠ¹åŒ–**
   ```bash
   # authorized_keysã‹ã‚‰å¤ã„å…¬é–‹éµã®è¡Œã‚’å‰Šé™¤
   nano ~/.ssh/authorized_keys
   ```

### Step 3: é–‹ç™ºç’°å¢ƒã®æ›´æ–°

1. **ãƒ­ãƒ¼ã‚«ãƒ«æŽ¥ç¶šè¨­å®šæ›´æ–°**
   ```bash
   # ~/.ssh/configã«è¿½åŠ 
   Host roic-prod
     HostName 54.199.201.201
     User ubuntu
     IdentityFile ~/.ssh/AWS02-roic-prod.pem
     IdentitiesOnly yes
   ```

2. **æ–°ã—ã„æŽ¥ç¶šæ–¹æ³•**
   ```bash
   ssh roic-prod
   # ã¾ãŸã¯
   ssh -i ~/.ssh/AWS02-roic-prod.pem ubuntu@54.199.201.201
   ```

### Step 4: CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³æ›´æ–°ï¼ˆJenkinsï¼‰

1. **Jenkinsfileã®æ›´æ–°**
   ```bash
   # ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¹ã‚¯ãƒªãƒ—ãƒˆå†…ã®éµãƒ•ã‚¡ã‚¤ãƒ«åã‚’æ›´æ–°
   # AWS01.pem â†’ AWS02-roic-prod.pem
   ```

2. **Jenkinsç§˜å¯†éµã®æ›´æ–°**
   - Jenkinsç®¡ç†ç”»é¢ã§æ–°ã—ã„ç§˜å¯†éµã‚’ç™»éŒ²
   - å¤ã„ç§˜å¯†éµã®Credentialã‚’å‰Šé™¤

### Step 5: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°

1. **æŽ¥ç¶šæƒ…å ±ã®æ›´æ–°**
   ```bash
   # ä»Šå¾Œã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ä»¥ä¸‹ã®å½¢å¼ã‚’ä½¿ç”¨
   ssh -i [PRIVATE_KEY] ubuntu@54.199.201.201
   ```

2. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ³¨è¨˜ã®è¿½åŠ **
   - README.mdã«å®Œäº†å ±å‘Šã‚’è¿½è¨˜

## âœ… å®Œäº†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] **æ–°ã—ã„ã‚­ãƒ¼ãƒšã‚¢ä½œæˆ** (AWS02-roic-prod)
- [ ] **EC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®éµæ›´æ–°** 
- [ ] **æ–°ã—ã„éµã§ã®æŽ¥ç¶šãƒ†ã‚¹ãƒˆ**
- [ ] **å¤ã„éµã®ç„¡åŠ¹åŒ–**
- [ ] **ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã®æŽ¥ç¶šè¨­å®šæ›´æ–°**
- [ ] **CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®æ›´æ–°**
- [ ] **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æœ€çµ‚æ›´æ–°**
- [ ] **å¤ã„ã‚­ãƒ¼ãƒšã‚¢å‰Šé™¤** (AWSã‚³ãƒ³ã‚½ãƒ¼ãƒ«)

## ðŸ›¡ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç¢ºèª

### å®Œäº†å¾Œã®ç¢ºèªäº‹é …
1. **æ–°ã—ã„éµã§ã®æŽ¥ç¶šæˆåŠŸ**
2. **å¤ã„éµã§ã®æŽ¥ç¶šå¤±æ•—** (ç„¡åŠ¹åŒ–ç¢ºèª)
3. **GitGuardianã‚¢ãƒ©ãƒ¼ãƒˆè§£æ¶ˆ**
4. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ç§˜å¯†éµæƒ…å ±ãªã—**

### æŽ¨å¥¨äº‹é …
- ðŸ”„ **å®šæœŸãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³**: 3-6ãƒ¶æœˆã”ã¨ã®éµæ›´æ–°
- ðŸ“Š **ç›£è¦–ç¶™ç¶š**: GitGuardianã§ã®ç¶™ç¶šç›£è¦–
- ðŸ”’ **æœ€å°æ¨©é™**: å¿…è¦æœ€å°é™ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™

## ðŸ“ž ç·Šæ€¥æ™‚é€£çµ¡å…ˆ

**å®Ÿæ–½è²¬ä»»è€…**: é–‹ç™ºãƒãƒ¼ãƒ   
**å®Ÿæ–½äºˆå®šæ—¥**: 2025å¹´6æœˆ30æ—¥ï½ž7æœˆ1æ—¥  
**å„ªå…ˆåº¦**: é«˜ï¼ˆHigh Priorityï¼‰

---
**æ³¨æ„**: ã“ã®æ‰‹é †ã¯ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å‘ä¸Šã®ãŸã‚ã®äºˆé˜²çš„æŽªç½®ã§ã™ã€‚ç¾åœ¨ã®ã‚·ã‚¹ãƒ†ãƒ ã«å®Ÿå®³ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚