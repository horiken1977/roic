# ROIC分析アプリケーション 機能設計書

## 1. システム概要

### 1.1 目的
日系上場企業のROIC（投下資本利益率）を自動計算・分析・比較するWebアプリケーション

### 1.2 対象ユーザー
- 投資アナリスト
- ファンドマネージャー
- 財務担当者
- 投資家

## 2. 機能要件

### 2.1 コア機能

#### 2.1.1 ROIC計算機能 ✅
- **ステータス**: 実装完了
- **説明**: 4つの計算方式に対応したROIC自動計算
- **計算方式**:
  1. 基本ROIC = 営業利益 / 投下資本
  2. 調整ROIC = (営業利益 - 税金) / 投下資本
  3. 拡張ROIC = NOPAT / 投下資本
  4. 詳細ROIC = (営業利益 × (1 - 税率)) / (固定資産 + 運転資本)

#### 2.1.2 企業検索・フィルタリング機能 ✅
- **ステータス**: 実装完了
- **機能詳細**:
  - 企業名による検索
  - 業界コードでのフィルタリング
  - 資本金規模での絞り込み
  - 上場市場での分類

#### 2.1.3 業界比較・ランキング機能 🚧
- **ステータス**: 開発中
- **機能詳細**:
  - 同業界内ROIC比較
  - 業界平均との比較
  - ランキング表示
  - パーセンタイル表示

#### 2.1.4 データ可視化機能 📋
- **ステータス**: 設計中
- **機能詳細**:
  - ROICトレンドチャート
  - 業界比較グラフ
  - ヒートマップ表示
  - 散布図分析

### 2.2 サポート機能

#### 2.2.1 データ管理機能 ✅
- **ステータス**: 実装完了
- **機能詳細**:
  - EDINET APIからの財務データ取得
  - データキャッシュ機能
  - データ更新スケジューリング

#### 2.2.2 エクスポート機能 📋
- **ステータス**: 計画中
- **機能詳細**:
  - CSV形式でのデータエクスポート
  - PDF形式でのレポート生成
  - Excel形式での詳細分析データ

#### 2.2.3 ユーザー管理機能 📋
- **ステータス**: 計画中
- **機能詳細**:
  - ユーザー登録・認証
  - お気に入り企業登録
  - ウォッチリスト機能

## 3. 非機能要件

### 3.1 パフォーマンス要件
- **レスポンス時間**: 画面表示 < 2秒
- **データ更新**: 日次バッチ処理
- **同時ユーザー数**: 100ユーザー対応

### 3.2 セキュリティ要件
- **データ暗号化**: HTTPS通信
- **アクセス制御**: ロールベースアクセス
- **監査ログ**: 全操作の記録

### 3.3 可用性要件
- **稼働率**: 99.5%以上
- **バックアップ**: 日次自動バックアップ
- **災害復旧**: 24時間以内の復旧

## 4. 技術仕様

### 4.1 フロントエンド
- **フレームワーク**: Next.js 15
- **言語**: TypeScript
- **スタイリング**: Tailwind CSS
- **状態管理**: Zustand

### 4.2 バックエンド
- **実行環境**: Node.js
- **フレームワーク**: Express.js
- **データベース**: PostgreSQL (予定)
- **外部API**: EDINET API

### 4.3 インフラ
- **ホスティング**: GitHub Pages (フロントエンド)
- **CI/CD**: GitHub Actions
- **監視**: GitHub Insights

## 5. 開発計画

### Phase 1: 基盤構築 ✅ 100%
- [x] Next.jsプロジェクトセットアップ
- [x] 基本UI/UXデザイン
- [x] ルーティング設定
- [x] 状態管理実装

### Phase 2: コア機能開発 🚧 75%
- [x] ROIC計算エンジン
- [x] 企業検索機能
- [ ] 業界比較機能
- [ ] データ可視化

### Phase 3: データ統合 📋 0%
- [ ] EDINET API連携
- [ ] データベース設計
- [ ] バッチ処理実装

### Phase 4: 高度機能 📋 0%
- [ ] レポート生成
- [ ] エクスポート機能
- [ ] ユーザー管理

### Phase 5: 最適化・運用 📋 0%
- [ ] パフォーマンス最適化
- [ ] セキュリティ強化
- [ ] 運用監視

## 6. 進捗状況

### 全体進捗: 45%

#### 完了機能
- ✅ プロジェクト基盤
- ✅ UI/UXフレームワーク
- ✅ 基本ナビゲーション
- ✅ ROIC計算ロジック
- ✅ 企業検索インターフェース

#### 開発中機能
- 🚧 業界比較機能
- 🚧 データ可視化コンポーネント
- 🚧 テスト自動化

#### 計画中機能
- 📋 EDINET API統合
- 📋 データベース設計
- 📋 エクスポート機能
- 📋 ユーザー管理

## 7. 品質保証

### 7.1 テスト戦略
- **ユニットテスト**: Jest + React Testing Library
- **E2Eテスト**: Playwright
- **カバレッジ目標**: 80%以上

### 7.2 品質メトリクス
- **コード品質**: ESLint + TypeScript
- **パフォーマンス**: Lighthouse Score > 90
- **アクセシビリティ**: WCAG 2.1 AA準拠

---
*最終更新: ${new Date().toLocaleString('ja-JP')}*
*このドキュメントは開発進捗に応じて自動更新されます*